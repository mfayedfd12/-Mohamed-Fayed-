# منطق لعبة "Which Hand" (أي يد)

هذا الملف يشرح "طريقة تفكير" اللعبة خطوة بخطوة، وكيف تتخذ قراراتها في كل محاولة يقوم بها اللاعب.

## 1. مرحلة المراهنة (Betting)

هذه هي نقطة البداية لكل جولة جديدة.

- **الحالة الأولية:** تبدأ اللعبة برصيد افتراضي (2000 نقطة). يجب على اللاعب تحديد مبلغ الرهان الذي يريد أن يلعب به.
- **تحديد الرهان:** يمكن للاعب استخدام الأزرار لتحديد قيمة الرهان:
    - `MIN`: يضبط الرهان على أقل قيمة ممكنة (10 نقاط).
    - `MAX`: يضبط الرهان على أعلى قيمة ممكنة (5000 نقطة) أو على قدر رصيد اللاعب إذا كان أقل.
    - `X2`: يضاعف قيمة الرهان الحالية.
    - `X/2`: يقسم قيمة الرهان الحالية إلى النصف.
- **التفكير:** تتحقق اللعبة باستمرار من أن قيمة الرهان لا تتجاوز رصيد اللاعب. إذا كان الرهان أعلى من الرصيد، يتم تعطيل زر "STAKE" (راهن) لمنع اللاعب من المراهنة بما لا يملك.
- **بدء اللعبة:** عند الضغط على زر "STAKE"، تقوم اللعبة بالآتي:
    1.  تخصم قيمة الرهان من رصيد اللاعب.
    2.  تختار سريًا وبشكل عشوائي اليد الصحيحة (إما "اليسرى" أو "اليمنى"). هذا القرار عشوائي تمامًا في كل مرة لضمان العدالة.
    3.  تنتقل إلى المرحلة التالية: مرحلة الاختيار.

## 2. مرحلة الاختيار (Choosing)

في هذه المرحلة، ينتقل القرار إلى اللاعب.

- **التفكير:** تعرض اللعبة رسالة توضح المبلغ الذي سيفوز به اللاعب إذا خمن بشكل صحيح (قيمة الرهان × 2).
- **مهمة اللاعب:** يجب على اللاعب النقر على إحدى اليدين المغلقتين لتحديد تخمينه.
- **الانتقال:** بمجرد أن يختار اللاعب يدًا، تنتقل اللعبة إلى مرحلة كشف النتيجة.

## 3. مرحلة كشف النتيجة (Reveal)

هذه هي مرحلة التشويق حيث يتم الكشف عن نتيجة تخمين اللاعب.

- **التفكير:**
    1.  تبدأ اللعبة عدًا تنازليًا قصيرًا (حوالي 1.5 ثانية) لزيادة الحماس. خلال هذا الوقت، تظهر رسالة "..." غامضة.
    2.  بعد انتهاء الوقت، تقارن اللعبة بين اليد التي اختارها اللاعب (`chosenHand`) واليد الصحيحة التي اختارتها سريًا في البداية (`correctHand`).
    3.  بناءً على المقارنة، تحدد اللعبة النتيجة: فوز أو خسارة.

- **في حالة الفوز:**
    1.  تقوم اللعبة بتشغيل مؤثرات بصرية وصوتية للفوز (وميض ذهبي، ظهور عملة معدنية).
    2.  تحسب الأرباح الحالية (قيمة الرهان مضروبة في المضاعف الحالي، والذي يبدأ بـ 2x).
    3.  تعرض شاشة خاصة تسمى "مرحلة المضاعفة" (Bonus Choice).

- **في حالة الخسارة:**
    1.  تقوم اللعبة بتشغيل مؤثرات بصرية وصوتية للخسارة (وميض أحمر، اهتزاز الشاشة).
    2.  يعتبر الرهان الذي وضعه اللاعب خاسرًا.
    3.  بعد فترة قصيرة، تعود اللعبة تلقائيًا إلى "مرحلة المراهنة" ليبدأ اللاعب جولة جديدة.

## 4. مرحلة المضاعفة (Bonus Choice)

هذه المرحلة تظهر فقط بعد الفوز، وتعطي اللاعب خيارًا استراتيجيًا.

- **التفكير:** تعرض اللعبة للاعب أرباحه الحالية وتمنحه خيارين:
    1.  **Cash Out (سحب الأرباح):** إذا اختار اللاعب هذا الخيار، تضيف اللعبة الأرباح إلى رصيده الإجمالي، وتنتهي الجولة. تعود اللعبة إلى "مرحلة المراهنة" لبدء جولة جديدة بالرصيد المحدث.
    2.  **Double Up (المضاعفة):** إذا اختار اللاعب هذا الخيار، فإنه يقرر المخاطرة بأرباحه الحالية مقابل فرصة لمضاعفتها.
        - تقوم اللعبة بمضاعفة قيمة المضاعف (2x تصبح 4x، ثم 8x، وهكذا).
        - تختار اللعبة يدًا صحيحة جديدة بشكل عشوائي.
        - تعود اللعبة إلى "مرحلة الاختيار" ليقوم اللاعب بتخمين جديد، ولكن هذه المرة للربح المضاعف.

- **حد المضاعفة:** تستمر عملية المضاعفة حتى يصل المضاعف إلى حده الأقصى (32x). عند هذه النقطة، تجبر اللعبة اللاعب على سحب أرباحه ("Cash Out") لضمان حصوله على جائزته الكبرى.

## 5. نهاية اللعبة (Game Over)

- **التفكير:** في كل مرة تعود فيها اللعبة إلى "مرحلة المراهنة"، تتحقق من رصيد اللاعب.
- **شرط النهاية:** إذا كان رصيد اللاعب أقل من الحد الأدنى للرهان (10 نقاط)، فلن يتمكن من اللعب مرة أخرى.
- **الإجراء:** تعرض اللعبة رسالة "Game Over" مع زر "Play Again" (العب مرة أخرى)، والذي عند الضغط عليه يعيد تعبئة الرصيد إلى القيمة الأولية لبدء اللعبة من جديد.
